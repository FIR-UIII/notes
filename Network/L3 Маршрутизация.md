## Статическая маршрутизация
Router-Router
![[Pasted image 20231021112828.png]]
Роутер R1 из сети 10.1.1.0 не знает 3 сети (10.1.2.0/24, 10.1.23.0/29, 10.1.3.0/24) и их нужно прописать. Аналогично сделать нужно и на других роутерах
```
>>> Синтаксис ip route [ip network] [network mask] [ip router next hop]
R1(config)#ip route 10.1.3.0 255.255.255.0 10.1.12.2
R1(config)#ip route 10.1.23.0 255.255.255.248 10.1.12.2
R1(config)#ip route 10.1.2.0 255.255.255.0 10.1.12.2

>>> В случае ошибки отменить можно так
R1(config)#no ip route 10.1.2.0 255.255.255.0 10.1.12.2

>>> Проверить 
sh ip route [option ?]
S 10.1.2.0/24 [1/0] via 10.1.12.2
S 10.1.3.0/24 [1/0] via 10.1.12.2
S 10.1.23.0/29 [1/0] via 10.1.12.2
```

Проверка отправки пакетов
```
C:\>ping 10.1.3.101
Reply from 10.1.3.101: bytes=32 time=14ms TTL=125

C:\>tracert 10.1.3.101 # или tracert -d google.com или pathping -n ya.ru
Tracing route to 10.1.3.101 over a maximum of 30 hops:
1 0 ms 0 ms 0 ms 10.1.1.1
2 2 ms 2 ms 0 ms 10.1.12.2
3 6 ms 9 ms 8 ms 10.1.23.3
4 4 ms 1 ms 0 ms 10.1.3.101
```

Таблица маршрутизации
```
Router#sh ip route
```

Маршрут по умолчанию
Минусы - весь "мусор" будет отправляться дальше
Плюсы - если мы не знаем что делать с пакетами передаем дальше, а там разберутся
```
Router(config)#ip route 0.0.0.0 0.0.0.0 192.168.70.1
```
## Динамическая маршрутизация
Внутренне-доменная (внутри AS)
	Дистанционно-векторные (EIGRP, RIPv2)
	Состояния каналов (OSPF, IS-IS)
Внешне-доменная (между AS)
	Векторные (BGP)


### OSPF
1. При создании важно определить сколько будет зон. Если зон больше 2 - обязательно нужен нулевая зона (магистральная, Area 0, Backbone-area, зона 0.0.0.0.). А все другие зоны - должны смотреть в зону 0 для обмена и защиты от петель.
2. Выделить пограничные роутеры ABR
3. Нужен ли пограничный 

Для топологии с 3 роутерами в 0 зоне
![[Pasted image 20231105150654.png]]
```
R1#conf t
R1(config)#route ospf 1 > номер может быть любым
R1(config-router)#network 192.168.1.0 0.0.0.255 area 0 > ананосируем сеть с хостами
R1(config-router)#network 10.0.1.0 0.0.0.255 area 0 > ананосируем служубную сеть
R1#sh ip route
C 10.0.1.0 is directly connected, FastEthernet9/0
C 192.168.1.0/24 is directly connected, FastEthernet8/0
O 192.168.2.0/24 [110/2] via 10.0.1.2, 00:03:33, FastEthernet9/0
O 192.168.3.0/24 [110/2] via 10.0.1.3, 00:02:30, FastEthernet9/0
```
И так для каждого роутера и его сети